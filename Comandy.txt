
1
✦1 / 6 ✦
Документация: Система команд MQTT для многофункционального сенсора
на ESP32
Версия: 1.1
Дата: 2024-04-26
Автор: [Укажите автора]
Оглавление
1. Введение
2. Термины и определения
3. Архитектура топиков MQTT
4. Общие соглашения
5. Спецификация команд и событий
6. Примеры Payload
7. Рекомендации по реализации
8. Таблица команд
9. Контакты
1. Введение
Данный документ описывает структуру команд, событий и обмена данными для многофункционального устройства на базе ESP32, взаимодействующего
по протоколу MQTT. Устройство поддерживает:
Считывание RFID меток (13.56 MHz)
Адресную светодиодную индикацию (кольцо, ~24 LED)
Внешнюю адресную светодиодную ленту
Два силовых релейных выхода
Два цифровых входа
Wi-Fi и Bluetooth
Питание от 5V, 12V и аккумулятора 3.7V
Свободные GPIO для расширения
2. Термины и определения
Термин Описание
MQTT Легковесный протокол обмена сообщениями publish/subscribe
Payload Содержимое сообщения (обычно JSON или текст)
Topic Иерархический путь сообщения в MQTT
QoS Уровень качества доставки сообщения (Quality of Service)
Retain Флаг сохранения последнего сообщения в брокере
NVS Энергонезависимая память ESP32
Логическое/физическое расположение устройства
<device_type> Тип устройства (например, RFIDRelay)
<device_id> Уникальный идентификатор устройства
3. Архитектура топиков MQTT
Все топики строятся по шаблону:
<prefix>/<location>/<device_type>/<device_id>/<command_path> 
Сегменты топика:
prefix — тип сообщения:
